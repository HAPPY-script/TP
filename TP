local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TextLabel = Instance.new("TextLabel")
local UICorner_2 = Instance.new("UICorner")
local TextBox = Instance.new("TextBox")
local UICorner_3 = Instance.new("UICorner")
local TextButton = Instance.new("TextButton")
local UICorner_4 = Instance.new("UICorner")
local closeButton = Instance.new("TextButton")
local UICorner_5 = Instance.new("UICorner")
local tpTypeButton = Instance.new("TextButton")
local UICorner_6 = Instance.new("UICorner")
local tpMenuFrame = Instance.new("Frame")
local UICorner_7 = Instance.new("UICorner")
local tpOptions = {"TP Trên Đầu", "TP Đằng Trước", "TP Đằng Sau", "TP Bên Trái", "TP Bên Phải", "TP Sát"}

-- Properties:

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.383799434, 0, 0.17944786, 0)
Frame.Size = UDim2.new(0, 339, 0, 264)
Frame.Active = true
Frame.Draggable = true

UICorner.CornerRadius = UDim.new(0, 25)
UICorner.Parent = Frame

TextLabel.Parent = Frame
TextLabel.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0, 0, 0, 0)
TextLabel.Size = UDim2.new(0, 339, 0, 50)
TextLabel.Font = Enum.Font.Bangers
TextLabel.Text = "Happy_bmgo"
TextLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextSize = 40.000

UICorner_2.CornerRadius = UDim.new(0, 25)
UICorner_2.Parent = TextLabel

TextBox.Parent = Frame
TextBox.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
TextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.112097748, 0, 0.308282197, 0)
TextBox.Size = UDim2.new(0, 263, 0, 43)
TextBox.Font = Enum.Font.SourceSans
TextBox.PlaceholderColor3 = Color3.fromRGB(0, 0, 0)
TextBox.PlaceholderText = ">-{NAME}-<"
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
TextBox.TextSize = 32.000

UICorner_3.CornerRadius = UDim.new(0, 25)
UICorner_3.Parent = TextBox

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BorderSizePixel = 0
TextButton.Position = UDim2.new(0.257225543, 0, 0.594696999, 0)
TextButton.Size = UDim2.new(0, 167, 0, 37)
TextButton.Font = Enum.Font.SourceSans
TextButton.Text = "TP"
TextButton.TextColor3 = Color3.fromRGB(0, 0, 0)
TextButton.TextSize = 14.000

UICorner_4.CornerRadius = UDim.new(0, 25)
UICorner_4.Parent = TextButton

closeButton.Parent = Frame
closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
closeButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
closeButton.BorderSizePixel = 0
closeButton.Position = UDim2.new(0.02, 0, 0.1, 0)
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Font = Enum.Font.SourceSans
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(0, 0, 0)
closeButton.TextSize = 20.000

UICorner_5.CornerRadius = UDim.new(0, 15)
UICorner_5.Parent = closeButton

tpTypeButton.Parent = Frame
tpTypeButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
tpTypeButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
tpTypeButton.BorderSizePixel = 0
tpTypeButton.Position = UDim2.new(0.2, 0, 0.2, 0)
tpTypeButton.Size = UDim2.new(0, 150, 0, 40)
tpTypeButton.Font = Enum.Font.SourceSans
tpTypeButton.Text = "Chọn Kiểu TP"
tpTypeButton.TextColor3 = Color3.fromRGB(0, 0, 0)
tpTypeButton.TextSize = 14.000

UICorner_6.CornerRadius = UDim.new(0, 15)
UICorner_6.Parent = tpTypeButton

tpMenuFrame.Parent = Frame
tpMenuFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
tpMenuFrame.Position = UDim2.new(0.2, 0, 0.3, 0)
tpMenuFrame.Size = UDim2.new(0, 150, 0, 220)
tpMenuFrame.Visible = false

UICorner_7.CornerRadius = UDim.new(0, 15)
UICorner_7.Parent = tpMenuFrame

local tpButtons = {}
for i, option in ipairs(tpOptions) do
    local tpButton = Instance.new("TextButton")
    tpButton.Parent = tpMenuFrame
    tpButton.Size = UDim2.new(1, 0, 0, 40)
    tpButton.Position = UDim2.new(0, 0, (i - 1) * 0.2, 0)
    tpButton.Text = option
    tpButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    tpButton.TextColor3 = Color3.fromRGB(255, 255, 255)

    tpButton.MouseButton1Click:Connect(function()
        teleportType = i
        tpTypeButton.Text = "Kiểu TP: " .. option
        tpMenuFrame.Visible = false
    end)

    table.insert(tpButtons, tpButton)
end

local isTeleporting = false
local teleportConnection
local teleportType = 1  -- Đặt giá trị mặc định cho kiểu TP

TextButton.MouseButton1Down:Connect(function()
    local player = game.Players.LocalPlayer
    local targetName = TextBox.Text
    local targetPlayer

    for _, p in pairs(game.Players:GetPlayers()) do
        if p.Name:sub(1, 3):lower() == targetName:sub(1, 3):lower() then
            targetPlayer = p
            break
        end
    end

    if targetPlayer then
        if isTeleporting then
            isTeleporting = false
            teleportConnection:Disconnect()
            TextButton.Text = "TP"
        else
            isTeleporting = true
            TextButton.Text = "Ngừng"

            teleportConnection = game:GetService("RunService").Heartbeat:Connect(function()
                if player.Character and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local targetPosition = targetPlayer.Character.HumanoidRootPart.Position

                    -- Thay đổi vị trí tùy theo kiểu TP đã chọn
                    if teleportType == 1 then
                        -- TP trên đầu
                        targetPosition = targetPosition + Vector3.new(0, 5, 0)  -- Trên 5m
                    elseif teleportType == 2 then
                        targetPosition = targetPosition + targetPlayer.Character.HumanoidRootPart.CFrame.LookVector * 5  -- Trước 5m
                    elseif teleportType == 3 then
                        targetPosition = targetPosition - targetPlayer.Character.HumanoidRootPart.CFrame.LookVector * 5  -- Sau 5m
                    elseif teleportType == 4 then
                        targetPosition = targetPosition - targetPlayer.Character.HumanoidRootPart.CFrame.RightVector * 5  -- Bên trái 5m
                    elseif teleportType == 5 then
                        targetPosition = targetPosition + targetPlayer.Character.HumanoidRootPart.CFrame.RightVector * 5  -- Bên phải 5m
                    elseif teleportType == 6 then
                        targetPosition = targetPosition + Vector3.new(0, 0, 1)  -- Sát
                    end

                    player.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
                end
            end)
        end
    else
        print("Không tìm thấy người chơi với tên: " .. targetName)
    end
end)

closeButton.MouseButton1Down:Connect(function()
    ScreenGui:Destroy()
end)

tpTypeButton.MouseButton1Down:Connect(function()
    tpMenuFrame.Visible = not tpMenuFrame.Visible
end)

-- Nút ẩn
local hideButton = Instance.new("TextButton")
hideButton.Parent = Frame
hideButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
hideButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
hideButton.BorderSizePixel = 0
hideButton.Position = UDim2.new(0.75, 0, 0.05, 0) -- Di chuyển nút ẩn sang góc trên bên phải
hideButton.Size = UDim2.new(0, 30, 0, 30)
hideButton.Font = Enum.Font.SourceSans
hideButton.Text = "Ẩn"
hideButton.TextColor3 = Color3.fromRGB(0, 0, 0)
hideButton.TextSize = 20.000

UICorner_5.CornerRadius = UDim.new(0, 15)
UICorner_5.Parent = hideButton

-- Menu nhỏ
local smallMenu = Instance.new("Frame")
smallMenu.Parent = ScreenGui
smallMenu.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
smallMenu.Position = UDim2.new(0.5, -75, 0.5, -50)
smallMenu.Size = UDim2.new(0, 150, 0, 100)
smallMenu.Visible = false
smallMenu.Active = true
smallMenu.Draggable = true

local smallMenuButton = Instance.new("TextButton")
smallMenuButton.Parent = smallMenu
smallMenuButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
smallMenuButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
smallMenuButton.BorderSizePixel = 0
smallMenuButton.Size = UDim2.new(1, 0, 0, 40)
smallMenuButton.Font = Enum.Font.SourceSans
smallMenuButton.Text = "Hiện"
smallMenuButton.TextColor3 = Color3.fromRGB(0, 0, 0)
smallMenuButton.TextSize = 20.000

-- Hiện menu nhỏ
hideButton.MouseButton1Down:Connect(function()
    Frame.Visible = false
    smallMenu.Visible = true
end)

-- Hiện lại menu chính
smallMenuButton.MouseButton1Down:Connect(function()
    smallMenu.Visible = false
    Frame.Visible = true
end)
